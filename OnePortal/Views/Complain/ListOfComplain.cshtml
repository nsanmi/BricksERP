@using HRM.DAL.Models
@using System.Data
@using PagedList;


@using PagedList.Mvc;
@model IPagedList<ws_complain>




<!-- Page header -->
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Make complain</h2>
        <ol class="breadcrumb">
            <li>
                <a href="@Url.Action("Index","Admin")">Administration</a>
            </li>
            <li>
                <a>HRM</a>
            </li>
            <li>
                <a>List of Complains</a>
            </li>
            <li class="active">
                <strong>All complain</strong>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">

    </div>
</div>
<!-- /page header -->
<!-- Content area -->


        <div class="col-lg-12">
           
            <div class="panel panel-flat">

                <div class="panel-heading" style="padding:10px 20px">

                    <h5 class="heading-text pull-right" >
                        Complain List
                    </h5>

                </div>
                <div class="panel-body" style="padding:0; border: 3px";
>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered  table-hover">
                        <thead>
                            <tr>
                                <th>Type of complaint</th>
                               <th>Comment</th>
                                <th>Priority</th>
                                <th>Date Created</th>
                                <th>Updated Date</th>
                                <th>Resolution Date</th>
                                <th>Resolve by</th>
                                <th>Resolved</th>
                                <th>Details</th>
                               
                            </tr>
                        </thead>
                        <tbody>
                            
                            @foreach (var complain in Model)
                            {
                                
                                    <tr>
                                        <td> @complain.Priority</td>
                                       <td>@complain.Comment</td> 
                                        <td>@complain.Priority</td>
                                        <td>@complain.CreateDate</td>
                                        <td>@complain.UpdateDate</td>
                                        <td>@complain.ResolutionDate</td>
                                        <td>@complain.ResolvedBy</td>
                                        <td><input type="checkbox" onclick="updateComplain(@complain.Id)" @(complain.Resolved == "No" ? "" : "checked") /> </td>
                                        <td>@Html.ActionLink("Check complain", "Update", new { complainId = complain.Id }, new { title = "Click to view complain details" })</td>
                                        
                                    </tr>
                                
                            }
                            
                        </tbody>
                    </table>
                    <div id='Paging' style="text-align:center">
                        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
                        of @Model.PageCount

                        @Html.PagedListPager(Model, page => Url.Action("index", new { page }))
                    </div>

                </div>

            </div>
        </div>



@section styles{
    <style>
        .table td.text {
            max-width: 177px;
        }

            .table td.text span {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                display: inline-block;
                max-width: 100%;
            }

        .table td {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }


        th {
            font-weight: bold;
            font-size: 1em;
            border-color: #FFCC00 !important;
        }

        table {
            border: 1px;
            border-color: #FFCC00 !important;
            table-layout: fixed;
        }

        td {
            border-color: #FFCC00 !important;
        }

        .table > tbody > tr > td, .table > thead > tr > th {
            padding: 6px 10px;
        }

        .table-striped > tbody > tr:nth-of-type(odd) {
        }

         .table-row {
        cursor: pointer;
    }

    </style>
}


@section scripts{
     <script>

      
         $(document).ready(function () {
             function updateComplain(complainId) {
                 var conf = confirm("Are you sure ?");
                 if (conf == true) {
                     $.ajax({
                         url: "/api/ComplainApi/" + complainId,
                         success: function (result) {
                            
                         }
                     });

                 }
             }
         });



         //$(document).ready(function ($) {
         //    $(".table-row").click(function () {
         //        window.document.location = $(this).data("href");
         //    });
         //});
        
       
    </script>
}